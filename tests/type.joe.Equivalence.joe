// type.joe.Equivalence.joe

var S2N = Equivalence(#str2num,
    \s -> s ~ String() ? Number(s) : null,
    \n -> n ~ Number() ? Joe.stringify(n) : null
);

function testKeyword() {
    assertEQ(S2N.keyword(), #str2num);
}

function testA2B() {
    assertEQ(S2N.a2b("123"), 123);
    assertEQ(S2N.a2b("xyz"), null);
    assertEQ(S2N.a2b(123), null);
}

function testB2A() {
    assertEQ(S2N.b2a(123), "123");
    assertEQ(S2N.b2a("xyz"), null);
}

function testIsEquivalent() {
    assertT(S2N.isEquivalent("123", 123));
    assertF(S2N.isEquivalent("123", 123.5));
    assertF(S2N.isEquivalent("123", "xyz"));
    assertF(S2N.isEquivalent(123, "123"));
    assertF(S2N.isEquivalent(123, 123));
}
