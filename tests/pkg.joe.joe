// Tests for the `joe` package's global functions

//-----------------------------------------------------------------------------
// catch()

function testCatch_ok() {
    var tuple = catch(\-> true);
    check(tuple.has(#ok, true));
}

function testCatch_error() {
    function bad() { throw "Simulated error!"; }
    var tuple = catch(bad);
    check(tuple.is(#error));
}

function testCatch_error_withTrace() {
    function bad() { throw "Simulated error!"; }
    var tuple = catch(bad);
    check(tuple.is(#error));

    check(tuple.error.traces()).eq([
        "In function bad()",
        "In java call(<function bad()>)",
        "Called from catch()",
    ]);
}

