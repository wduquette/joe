// String type tests

function testCharAt() {
    check("abc".charAt(0)).eq("a");
    check("abc".charAt(2)).eq("c");
    check("abc".charAt(2.9)).eq("c");

    function bad1() { "abc".charAt(-1); }
    function bad2() { "abc".charAt(3); }
    checkCatch(bad1).message("Expected 0 <= index < 3, got: Number '-1'.");
    checkCatch(bad2).message("Expected 0 <= index < 3, got: Number '3'.");
}

function testContains() {
    check("abcdef".contains("bcd")).isTrue();
    check("abcdef".contains("123")).isFalse();
}

function testEndsWith() {
    check("abcdef".endsWith("def")).isTrue();
    check("abcdef".endsWith("cde")).isFalse();
}

function testEqualsIgnoreCase() {
    check("abc".equalsIgnoreCase("ABC")).isTrue();
    check("abc".equalsIgnoreCase("ABCD")).isFalse();
}

function testIndent() {
    check("abc".indent(2)).eq("  abc");
}

function testIsBlank() {
    check("abc".isBlank()).isFalse();
    check("   ".isBlank()).isTrue();
    check("".isBlank()).isTrue();
}

function testIsEmpty() {
    check("abc".isEmpty()).isFalse();
    check("   ".isEmpty()).isFalse();
    check("".isEmpty()).isTrue();
}

function testJoin() {
    check(String.join(",", List())).eq("");
    check(String.join(",", List("a", "b"))).eq("a,b");
    check(String.join(",", List(1, 2))).eq("1,2");
}

function testLength() {
    check("abc".length()).eq(3);
}

function testLines() {
    check(" abc ".lines())
        .eq(List(" abc "));
    check(" abc \n def ".lines())
        .eq(List(" abc ", " def "));
}

function testMatches() {
    check("abc".matches("[a-z]+")).isTrue();
    check("123".matches("[a-z]+")).isFalse();
}

function testRepeat() {
    check("abc".repeat(0)).eq("");
    check("abc".repeat(1)).eq("abc");
    check("abc".repeat(2)).eq("abcabc");

    function bad() { "abc".repeat(-1); }

    checkCatch(bad)
        .message("Expected non-negative count, got: Number '-1'.");
}

function testSplit() {
    check("abc,def,ghi".split(","))
    .eq(List("abc", "def", "ghi"));
}

function testStartsWith() {
    check("abcdef".startsWith("abc")).isTrue();
    check("abcdef".startsWith("bcd")).isFalse();
}

function testStrip() {
    check("  abc  ".strip()).eq("abc");
}

function testStripIndent() {
    check("   abc".stripIndent()).eq("abc");
}

function testStripLeading() {
    check("  abc  ".stripLeading()).eq("abc  ");
}

function testStripTrailing() {
    check("  abc  ".stripTrailing()).eq("  abc");
}

function testToLowerCase() {
    check("ABC".toUpperCase()).eq("abc");
}

function testToLowerCase() {
    check("AbC".toString()).eq("AbC");
}

function testToUpperCase() {
    check("abc".toUpperCase()).eq("ABC");
}
