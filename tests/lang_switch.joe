// lang_switch: switch statement tests.

function testSimple() {
    function cases(x) {
        switch (x) {
            case 1 -> return "a";
            case 2 -> return "b";
            case 3 -> return "c";
            default -> return "?";
        }
    }

    assertEQ(cases(1), "a");
    assertEQ(cases(2), "b");
    assertEQ(cases(3), "c");
    assertEQ(cases(4), "?");
}

function testMulti() {
    function cases(x) {
        switch (x) {
            case 1, 2, 3 -> return "abc";
            case 4, 5, 6 -> return "def";
            case 7, 8, 9 -> return "ghi";
            default -> return "?";
        }
    }

    assertEQ(cases(1), "abc");
    assertEQ(cases(2), "abc");
    assertEQ(cases(3), "abc");
    assertEQ(cases(4), "def");
    assertEQ(cases(5), "def");
    assertEQ(cases(6), "def");
    assertEQ(cases(7), "ghi");
    assertEQ(cases(8), "ghi");
    assertEQ(cases(9), "ghi");
    assertEQ(cases(0), "?");
}

function testNoDefault() {
    function cases(x) {
        switch (x) {
            case 1 -> return "a";
            case 2 -> return "b";
            case 3 -> return "c";
        }
        return "?";
    }

    assertEQ(cases(1), "a");
    assertEQ(cases(2), "b");
    assertEQ(cases(3), "c");
    assertEQ(cases(4), "?");
}

function testBlocks() {
    function cases(x) {
        switch (x) {
            case 1 -> {
                return "a";
            }
            case 2 -> {
                return "b";
            }
            case 3 -> {
                return "c";
            }
            default -> {
                return "?";
            }
        }
    }

    assertEQ(cases(1), "a");
    assertEQ(cases(2), "b");
    assertEQ(cases(3), "c");
    assertEQ(cases(4), "?");
}
