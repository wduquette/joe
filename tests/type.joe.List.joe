// List type tests

//-----------------------------------------------------------------------------
// add()

function testAdd_simple() {
    var list = List();
    check(list.add(1)).eq(List(1));
    check(list.add(2)).eq(List(1, 2));
    check(list.add(3)).eq(List(1, 2, 3));
}

function testAdd_index() {
    var list = List();
    check(list.add(1)).eq(List(1));
    check(list.add(0, 2)).eq(List(2, 1));
    check(list.add(1, 3)).eq(List(2, 3, 1));

    checkCatch(\-> list.add(-1, 4))
        .message("Expected 0 <= index < 4, got: Number '-1'.");
}

//-----------------------------------------------------------------------------
// addAll()

function testAddAll_simple() {
    var list = List(1, 2);
    check(list.addAll(List(3, 4, 5))).eq(List(1, 2, 3, 4, 5));

    checkCatch(\-> list.addAll(6))
        .message("Expected List, got: Number '6'.");
}

function testAddAll_index() {
    var list = List(1, 5);
    check(list.addAll(1, List(2, 3, 4))).eq(List(1, 2, 3, 4, 5));

    checkCatch(\-> list.addAll(-1, List()))
        .message("Expected 0 <= index < 6, got: Number '-1'.");
}

//-----------------------------------------------------------------------------
// clear()

function testClear() {
    var list = List(1, 2, 3);
    check(list.clear()).eq(List());
}

//-----------------------------------------------------------------------------
// contains()

function testContains() {
    var list = List(1, 2, 3);
    check(list.contains(2)).eq(true);
    check(list.contains(4)).eq(false);
}

//-----------------------------------------------------------------------------
// containsAll()

function testContainsAll() {
    var list = List(1, 2, 3);
    check(list.containsAll(List(2, 3))).eq(true);
    check(list.containsAll(List(4))).eq(false);
}

//-----------------------------------------------------------------------------
// copy()

function testCopy() {
    var a = List(1, 2, 3);
    var b = a.copy();
    a.clear();
    check(a.size()).eq(0);
    check(b).eq(List(1, 2, 3));
}

//-----------------------------------------------------------------------------
// testGet()

function testGet() {
    var list = List(1, 2, 3);
    check(list.get(0)).eq(1);
    check(list.get(2)).eq(3);

    checkCatch(\-> list.get(4))
        .message("Expected 0 <= index < 3, got: Number '4'.");
}

//-----------------------------------------------------------------------------
// testGetFirst()

function testGetFirst() {
    var list = List(1, 2, 3);
    check(list.getFirst()).eq(1);

    checkCatch(\-> List().getFirst())
        .message("List is empty.");
}

//-----------------------------------------------------------------------------
// testGetLast()

function testGetLast() {
    var list = List(1, 2, 3);
    check(list.getLast()).eq(3);

    checkCatch(\-> List().getLast())
        .message("List is empty.");
}

//-----------------------------------------------------------------------------
// indexOf()

function testIndexOf() {
    var list = List(1, 2, 3, 2, 1);
    check(list.indexOf(2)).eq(1);
    check(list.indexOf(4)).eq(-1);
}

//-----------------------------------------------------------------------------
// isEmpty()

function testIsEmpty() {
    check(List(1).isEmpty()).eq(false);
    check(List().isEmpty()).eq(true);
}

//-----------------------------------------------------------------------------
// lastIndexOf()

function testLastIndexOf() {
    var list = List(1, 2, 3, 2, 1);
    check(list.lastIndexOf(2)).eq(3);
    check(list.lastIndexOf(4)).eq(-1);
}

//-----------------------------------------------------------------------------
// testRemove()

function testRemove() {
    var list = List(1, 2, 3);
    check(list.remove(2)).eq(true);
    check(list).eq(List(1, 3));

    check(list.remove(2)).eq(false);
}

//-----------------------------------------------------------------------------
// testRemoveAll()

function testRemoveAll() {
    var list = List(1, 2, 3);
    check(list.removeAll(List(2))).eq(true);
    check(list).eq(List(1, 3));

    check(list.removeAll(List(4))).eq(false);
}

//-----------------------------------------------------------------------------
// testRemoveAt()

function testRemoveAt() {
    var list = List(1, 2, 3);
    check(list.removeAt(1)).eq(2);
    check(list).eq(List(1, 3));

    checkCatch(\-> list.removeAt(-1))
        .message("Expected 0 <= index < 2, got: Number '-1'.");
}

//-----------------------------------------------------------------------------
// testRemoveFirst()

function testRemoveFirst() {
    var list = List(1, 2, 3);
    check(list.removeFirst()).eq(1);

    checkCatch(\-> List().removeFirst())
        .message("List is empty.");
}

//-----------------------------------------------------------------------------
// testRemoveLast()

function testRemoveLast() {
    var list = List(1, 2, 3);
    check(list.removeLast()).eq(3);

    checkCatch(\-> List().removeLast())
        .message("List is empty.");
}

//-----------------------------------------------------------------------------
// set()

function testSet() {
    var list = List(1, 2, 3);
    check(list.set(1, "x")).eq(2);
    check(list).eq(List(1, "x", 3));
}

//-----------------------------------------------------------------------------
// size()

function testSize() {
    check(List().size()).eq(0);
    check(List(1,2,3).size()).eq(3);
}